function utilitySlider(){var e=$(".utilities li").width();$(".utilities").bxSlider({slideWidth:e,minSlides:1,maxSlides:8,slideMargin:0,infiniteLoop:true,pager:false,nextText:">",prevText:"<"});if($(".today-hours").length>0){hoursComponent("slider")}}function typeaheadSetup(){var e,t,n;e=$("#library_q.ajax_typeahead");if(e.length>0){t=$("#hero-search-databases").data("url");n=t.indexOf("?")==-1?"?":"&";t=t+n;e.typeahead({name:"databases",limit:100,prefetch:{url:t,filter:function(e){var n=[];if(e.RES!==undefined){n=getTypeaheadDatabase(e,t)}return n}},remote:{url:t+"q=%QUERY",filter:function(e){var n=[];if(e.RES!==undefined){n=getTypeaheadDatabase(e,t)}return n}},template:['<p class="ta-h1">{{value}}</p>'].join(""),engine:Hogan});e.on("typeahead:selected",function(e,t){window.location=t.redirect_url});if($(".big-search.database-search.database-page").length===0){$(".twitter-typeahead").css("width","103%")}else if($(".big-search.database-search.database-page").length>0){$(".twitter-typeahead").addClass("span10")}$(".tt-hint").addClass("input span12");$(".tt-query").css("width","100%");if(Modernizr.mq("screen and (max-width:767px)")){$(".tt-hint").css("width","100%")}}}function getTypeaheadDatabase(e,t){var n=[];if(e.RES.M==1){$.each(e.RES.R.MT,function(t,n){if(n["@attributes"].N=="full_title"){e.RES.R.T=n["@attributes"].V}});$.each(e.RES.R.MT,function(t,n){if(n["@attributes"].N=="full_description"){e.RES.R.S=n["@attributes"].V}});$.each(e.RES.R.MT,function(t,n){if(n["@attributes"].N=="external_link"){e.RES.R.U=n["@attributes"].V}});e.RES.R.combined=e.RES.R.T;n.push({name:e.RES.R.T,description:e.RES.R.S,language:"en",value:e.RES.R.combined,redirect_url:e.RES.R.U,tokens:e.RES.R.T})}else if(e.RES.M>1){for(i=0;i<e.RES.R.length;i++){$.each(e.RES.R[i].MT,function(t,n){if(n["@attributes"].N=="full_title"){e.RES.R[i].T=n["@attributes"].V}});$.each(e.RES.R[i].MT,function(t,n){if(n["@attributes"].N=="full_description"){e.RES.R[i].S=n["@attributes"].V}});$.each(e.RES.R[i].MT,function(t,n){if(n["@attributes"].N=="external_link"){e.RES.R[i].U=n["@attributes"].V}});e.RES.R[i].combined=e.RES.R[i].T;n.push({name:e.RES.R[i].T,description:e.RES.R[i].S,language:"en",value:e.RES.R[i].combined,redirect_url:e.RES.R[i].U,tokens:e.RES.R[i].T})}}return n}$(function(){typeaheadSetup()});$(document).ready(function(){if($("#form-library-search").length>0){$("#form-library-search").librarySearch({search_field:$("#library_q"),size:"large"})}if($(".utilities").length>0){utilitySlider()}})